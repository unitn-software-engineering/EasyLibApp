import{r as d,o as y,w as C,a as r,c,b as e,d as L,v as T,t as i,F as _,e as U,u as f,f as h,l as a,g as x}from"./index.d307923d.js";import{f as E,b as N,c as w,d as P}from"./books.31378a42.js";const S=e("span",null,"Insert a new book",-1),D=e("br",null,null,-1),I=e("br",null,null,-1),V={style:{color:"red"}},A=e("h1",null,"Books:",-1),M=["href"],O=h(" - "),R=["onClick"],$=h(" - "),F=["onClick"],j={setup(p){const u="https://easy-lib.onrender.com",v=u+"/api/v1"+"/booklendings",l=d(""),s=d("");y(()=>{E()}),C(a,(o,t)=>{s.value=""});function g(){if(l.value==""){s.value="Please specify a valid title!";return}s.value="",w(l.value).catch(o=>console.error(o))}function b(o){P(o).catch(t=>console.error(t))}function m(o){if(!a.token){s.value="Please login to take a book!";return}s.value="",fetch(v,{method:"POST",headers:{"Content-Type":"application/json","x-access-token":a.token},body:JSON.stringify({student:a.self,book:o.self})}).then(t=>{}).catch(t=>console.error(t))}return(o,t)=>(r(),c(_,null,[e("form",null,[S,D,L(e("input",{"onUpdate:modelValue":t[0]||(t[0]=n=>l.value=n)},null,512),[[T,l.value]]),e("button",{type:"button",onClick:g},"Create book "+i(l.value),1),I,e("span",V,i(s.value),1)]),A,e("ul",null,[(r(!0),c(_,null,U(f(N).value,n=>(r(),c("li",{key:n.self},[e("a",{href:f(u)+n.self},i(n.title),9,M),O,e("button",{onClick:B=>m(n)},"TAKE",8,R),$,e("button",{onClick:B=>b(n)},"DELETE",8,F)]))),128))])],64))}},J={setup(p){return(u,k)=>(r(),c("div",null,[x(j)]))}};export{J as default};
